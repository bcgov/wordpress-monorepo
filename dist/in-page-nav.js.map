{"version":3,"file":"in-page-nav.js","mappings":"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","sources":["webpack://design-system-wordpress-plugin/webpack/bootstrap","webpack://design-system-wordpress-plugin/webpack/runtime/make namespace object","webpack://design-system-wordpress-plugin/./src/Bcgov/DesignSystemPlugin/InPageNav/index.js","webpack://design-system-wordpress-plugin/./src/Bcgov/DesignSystemPlugin/InPageNav/index.css"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","document.addEventListener('DOMContentLoaded', () => {\n    const mainContent = document.querySelector('#main-content') || document.querySelector('main') || document.querySelector('.content-area');\n    if (!mainContent) return;\n\n    const headings = Array.from(mainContent.querySelectorAll('h2[id], h3[id]'));\n    if (headings.length < 2) return;\n\n    // Create navigation structure\n    const nav = document.createElement('aside');\n    nav.className = 'dswp-in-page-nav';\n    nav.innerHTML = `\n        <div class=\"nav-header\">\n            <div class=\"nav-title\">\n                <h4>On this page</h4>\n            </div>\n            <button type=\"button\" class=\"nav-toggle\" aria-label=\"Toggle navigation menu\" aria-expanded=\"false\"></button>\n        </div>\n        <ul class=\"nav-links\">\n            ${headings.map(heading => `\n                <li>\n                    <a href=\"#${heading.id}\" data-heading-id=\"${heading.id}\">\n                        ${heading.textContent}\n                    </a>\n                </li>\n            `).join('')}\n        </ul>\n    `;\n\n    // Create wrapper structure\n    const wrapper = document.createElement('div');\n    wrapper.className = 'dswp-nav-content-container';\n    mainContent.parentNode.insertBefore(wrapper, mainContent);\n    wrapper.appendChild(nav);\n    wrapper.appendChild(mainContent);\n\n    // Handle scroll and click events\n    const updateActiveLink = () => {\n        const navHeight = nav.offsetHeight + 8;\n        const scrollPosition = window.scrollY + navHeight + (window.innerHeight * 0.2);\n        \n        // Only check for mobile view and top position\n        if (window.innerWidth <= 768 && window.scrollY < 50) {\n            nav.classList.add('is-expanded');\n            navToggle.setAttribute('aria-expanded', 'true');\n        } else {\n            // Always collapse unless manually expanded\n            if (!nav.hasAttribute('data-manual-expanded')) {\n                nav.classList.remove('is-expanded');\n                navToggle.setAttribute('aria-expanded', 'false');\n            }\n        }\n        \n        // Find current heading\n        let currentHeading = null;\n        for (const heading of headings) {\n            if (heading.getBoundingClientRect().top + window.scrollY < scrollPosition) {\n                currentHeading = heading;\n            } else break;\n        }\n\n        // Update active link and current class\n        nav.querySelectorAll('a').forEach(link => {\n            const isCurrent = currentHeading && link.getAttribute('data-heading-id') === currentHeading.id;\n            link.classList.toggle('dswp-current', isCurrent);\n            const listItem = link.closest('li');\n            listItem.classList.toggle('current', isCurrent);\n        });\n    };\n\n    // Toggle navigation - simplified\n    const navToggle = nav.querySelector('.nav-toggle');\n    navToggle.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const isExpanded = nav.classList.toggle('is-expanded');\n        navToggle.setAttribute('aria-expanded', isExpanded ? 'true' : 'false');\n        \n        if (isExpanded) {\n            nav.setAttribute('data-manual-expanded', '');\n        } else {\n            nav.removeAttribute('data-manual-expanded');\n        }\n    });\n\n    // Smooth scroll to heading\n    nav.querySelectorAll('a').forEach(link => {\n        link.addEventListener('click', (e) => {\n            e.preventDefault();\n            const targetId = link.getAttribute('href').substring(1);\n            const target = document.getElementById(targetId);\n            if (!target) return;\n\n            const offset = nav.offsetHeight + dswpInPageNav.options.scroll_offset;\n            \n            window.scrollTo({\n                top: target.getBoundingClientRect().top + window.scrollY - offset,\n                behavior: 'smooth'\n            });\n            \n            history.pushState(null, null, `#${targetId}`);\n            \n            // Also remove manual expand marker when clicking a link\n            nav.removeAttribute('data-manual-expanded');\n            nav.classList.remove('is-expanded');\n        });\n    });\n\n    // Keep the throttled scroll listener\n    let scrollTimeout;\n    window.addEventListener('scroll', () => {\n        if (scrollTimeout) window.cancelAnimationFrame(scrollTimeout);\n        scrollTimeout = window.requestAnimationFrame(updateActiveLink);\n    });\n\n    // Initial check\n    updateActiveLink();\n}); ","// extracted by mini-css-extract-plugin\nexport {};"],"names":["document","addEventListener","mainContent","querySelector","headings","Array","from","querySelectorAll","length","nav","createElement","className","innerHTML","map","heading","id","textContent","join","wrapper","parentNode","insertBefore","appendChild","updateActiveLink","navHeight","offsetHeight","scrollPosition","window","scrollY","innerHeight","innerWidth","classList","add","navToggle","setAttribute","hasAttribute","remove","currentHeading","getBoundingClientRect","top","forEach","link","isCurrent","getAttribute","toggle","listItem","closest","e","stopPropagation","isExpanded","removeAttribute","preventDefault","targetId","substring","target","getElementById","offset","dswpInPageNav","options","scroll_offset","scrollTo","behavior","history","pushState","scrollTimeout","cancelAnimationFrame","requestAnimationFrame"],"sourceRoot":""}