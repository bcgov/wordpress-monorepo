document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".dswp-block-navigation-is-mobile-overlay, .dswp-block-navigation-is-always-overlay, .dswp-block-navigation-is-never-overlay").forEach((e=>{const t={mobileNavIcon:e.querySelector(".dswp-nav-mobile-toggle-icon"),menuContainer:e.querySelector(".dswp-block-navigation__container"),iconText:e.querySelector(".dswp-nav-mobile-menu-icon-text"),topBar:e.querySelector(".dswp-nav-mobile-menu-top-bar"),middleBar:e.querySelector(".dswp-nav-mobile-menu-middle-bar"),bottomBar:e.querySelector(".dswp-nav-mobile-menu-bottom-bar")},n=e.classList.contains("dswp-block-navigation-is-mobile-overlay"),o=e.classList.contains("dswp-block-navigation-is-always-overlay"),i="true"===e.dataset.showInDesktop,s="true"===e.dataset.showInMobile;if(i){const t=parseInt(e.dataset.dswpMobileBreakpoint)||768,n=document.createElement("style");n.innerHTML=`\n\t\t\t\t@media (max-width: ${t}px) {\n\t\t\t\t\t.dswp-block-navigation-is-mobile-overlay,\n\t\t\t\t\t.dswp-block-navigation-is-always-overlay,\n\t\t\t\t\t.dswp-block-navigation-is-never-overlay {\n\t\t\t\t\t\tdisplay: none !important;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`,document.head.appendChild(n)}if(s){const t=parseInt(e.dataset.dswpMobileBreakpoint)||768,n=document.createElement("style");n.innerHTML=`\n\t\t\t\t@media (min-width: ${t}px) {\n\t\t\t\t\t.wp-block-design-system-wordpress-plugin-navigation {\n\t\t\t\t\t\tdisplay: none !important;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`,document.head.appendChild(n)}function a(){e.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{e.classList.remove("is-open");const t=e.querySelector(".wp-block-navigation__submenu-container"),n=e.querySelector(".dswp-submenu-toggle");t&&t.classList.remove("is-open"),n&&n.setAttribute("aria-expanded","false")}))}function l(){t.iconText&&(t.iconText.innerText="Menu"),t.topBar&&t.topBar.classList.remove("dswp-nav-mobile-menu-top-bar-open"),t.middleBar&&t.middleBar.classList.remove("dswp-nav-mobile-menu-middle-bar-open"),t.bottomBar&&t.bottomBar.classList.remove("dswp-nav-mobile-menu-bottom-bar-open"),t.mobileNavIcon.setAttribute("aria-expanded","false")}function r(){e.querySelectorAll(".dswp-submenu-toggle").forEach((e=>{e.setAttribute("aria-expanded","false")}))}function c(){const n=parseInt(e.dataset.dswpMobileBreakpoint)||768;window.innerWidth<=n?(t.mobileNavIcon.style.display="flex",t.menuContainer.style.display="none",t.menuContainer.classList.add("dswp-is-mobile"),e.classList.add("dswp-block-navigation-is-mobile-overlay")):(t.mobileNavIcon.style.display="none",t.menuContainer.style.display="flex",t.menuContainer.classList.remove("dswp-is-mobile","is-menu-open"),e.classList.remove("dswp-block-navigation-is-mobile-overlay"),l(),a())}function d(e){const t=e.querySelector(".wp-block-navigation__submenu-container");if(!t)return;const n=m(e);1===n?(t.style.left="0%",t.style.right="auto"):n>=2&&(t.style.left="100%",t.style.right="auto");const o=t.getBoundingClientRect(),i=window.innerWidth;1===n&&o.right>i?(t.style.left="auto",t.style.right="0%"):n>=2&&o.right>i&&(t.style.left="auto",t.style.right="100%")}function m(e){let t=1,n=e.parentElement;for(;n;)n.classList.contains("wp-block-navigation-submenu")&&t++,n=n.parentElement;return t}o||e.classList.contains("dswp-block-navigation-is-mobile-only")?(t.mobileNavIcon.style.display="flex",t.menuContainer.style.display="none",t.menuContainer.classList.add("dswp-is-mobile")):n&&c(),n&&window.addEventListener("resize",c),t.mobileNavIcon&&t.mobileNavIcon.addEventListener("click",(function(){t.menuContainer.classList.toggle("is-menu-open");const e=t.menuContainer.classList.contains("is-menu-open");t.mobileNavIcon.setAttribute("aria-expanded",e.toString()),t.topBar.classList.toggle("dswp-nav-mobile-menu-top-bar-open"),t.middleBar.classList.toggle("dswp-nav-mobile-menu-middle-bar-open"),t.bottomBar&&t.bottomBar.classList.toggle("dswp-nav-mobile-menu-bottom-bar-open"),t.iconText.innerText=e?"Close menu":"Menu",t.menuContainer.style.display=e?"grid":"none",e||a()})),document.addEventListener("click",(function(n){const o=e.contains(n.target),i=window.innerWidth<=(parseInt(e.dataset.dswpMobileBreakpoint)||768);o||(i&&t.menuContainer.classList.contains("is-menu-open")?(t.menuContainer.classList.remove("is-menu-open"),t.menuContainer.style.display="none",l(),a()):i||(a(),r()))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(t.menuContainer.classList.contains("is-menu-open")&&(t.menuContainer.classList.remove("is-menu-open"),t.menuContainer.style.display="none",l()),a(),r())})),e.querySelectorAll(".wp-block-navigation-submenu > .wp-block-navigation-item__content").forEach((n=>{const o=n.closest(".wp-block-navigation-submenu"),i=o?.querySelector(".wp-block-navigation__submenu-container");if(i){!function(e){let t=e.parentElement;for(;t;)t.classList.contains("wp-block-navigation-submenu"),t=t.parentElement}(o);const i=document.createElement("button");i.className="dswp-submenu-toggle",i.setAttribute("aria-expanded","false"),i.setAttribute("aria-label","Toggle submenu"),n.parentNode.insertBefore(i,n.nextSibling),i.addEventListener("keydown",(e=>{if("Enter"===e.key||" "===e.key)if(e.preventDefault(),t.menuContainer.classList.contains("dswp-is-mobile"))i.click();else{o.classList.toggle("is-open");const e=o.querySelector(".wp-block-navigation__submenu-container");e&&(e.classList.toggle("is-open"),o.classList.contains("is-open"))&&m(o)>=2&&d(o),i.setAttribute("aria-expanded",o.classList.contains("is-open"))}})),i.addEventListener("click",(()=>{if(t.menuContainer.classList.contains("dswp-is-mobile")){const t=[];let n=o;for(;n;)n.classList.contains("wp-block-navigation-submenu")&&t.push(n),n=n.parentElement.closest(".wp-block-navigation-submenu");e.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{if(!t.includes(e)){e.classList.remove("is-open");const t=e.querySelector(".wp-block-navigation__submenu-container"),n=e.querySelector(".dswp-submenu-toggle");t&&t.classList.remove("is-open"),n&&n.setAttribute("aria-expanded","false")}})),o.classList.toggle("is-open"),o.classList.contains("is-open")?i.setAttribute("aria-expanded","true"):i.setAttribute("aria-expanded","false")}})),t.menuContainer.classList.contains("dswp-is-mobile")||(o.addEventListener("mouseenter",(()=>{if(!t.menuContainer.classList.contains("dswp-is-mobile")){o.classList.add("is-open");const e=o.querySelector(".wp-block-navigation__submenu-container");e&&(e.classList.add("is-open"),m(o)>=2&&d(o))}})),o.addEventListener("mouseleave",(()=>{if(!t.menuContainer.classList.contains("dswp-is-mobile")){o.classList.remove("is-open");const e=o.querySelector(".wp-block-navigation__submenu-container");e&&e.classList.remove("is-open")}})))}}));const u=window.location.pathname;e.querySelectorAll(".wp-block-navigation-item__content").forEach((e=>{if(new URL(e.href).pathname===u){e.classList.add("active");const t=e.closest(".wp-block-navigation-item");t&&t.classList.add("active")}}))}))}));