/*! For license information please see document-repository.js.LICENSE.txt */
(()=>{"use strict";var e={20:(e,t,r)=>{var n=r(540),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,a={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!c.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:o,type:e,key:l,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},287:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator,h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||h}function g(){}function b(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var x=b.prototype=new g;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,o)&&!S.hasOwnProperty(o)&&(a[o]=t[o]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===a[o]&&(a[o]=c[o]);return{$$typeof:r,type:e,key:i,ref:s,props:a,_owner:_.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var O=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return i=i(c=e),e=""===a?"."+k(c,0):a,w(i)?(o="",null!=e&&(o=e.replace(O,"$&/")+"/"),P(i,t,o,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),t.push(i)),1;if(c=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var u=a+k(s=e[l],l);c+=P(s,t,o,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=P(s=s.value,t,o,u=a+k(s,l++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function L(e,t,r){if(null==e)return e;var n=[],o=0;return P(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},T={transition:null},F={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:T,ReactCurrentOwner:_};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,r){L(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=R,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)j.call(t,l)&&!S.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:r,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return C.current.useCallback(e,t)},t.useContext=function(e){return C.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return C.current.useDeferredValue(e)},t.useEffect=function(e,t){return C.current.useEffect(e,t)},t.useId=function(){return C.current.useId()},t.useImperativeHandle=function(e,t,r){return C.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return C.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.current.useMemo(e,t)},t.useReducer=function(e,t,r){return C.current.useReducer(e,t,r)},t.useRef=function(e){return C.current.useRef(e)},t.useState=function(e){return C.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return C.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return C.current.useTransition()},t.version="18.3.1"},540:(e,t,r)=>{e.exports=r(287)},848:(e,t,r)=>{e.exports=r(20)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const n=wp.element,o=wp.components,a=wp.apiFetch;var i=r.n(a);const s=wp.i18n;var c=r(540),l=r(848),u=function(e){if(!e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},d=function(e){if(!e)return"";var t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()};const f=function(e){var t=e.document,r=e.metadataFields,n=void 0===r?[]:r;if(!t)return null;var a=t.metadata,i=void 0===a?{}:a;return(0,l.jsxs)("div",{className:"document-details",children:[(0,l.jsxs)("div",{className:"document-details-header",children:[(0,l.jsx)("h2",{children:t.title}),(0,l.jsx)(o.Button,{variant:"primary",onClick:function(){return i.document_file_url?window.open(i.document_file_url,"_blank"):null},disabled:!i.document_file_url,children:(0,s.__)("Download","bcgov-design-system")})]}),(0,l.jsxs)("div",{className:"document-details-content",children:[(0,l.jsxs)("div",{className:"document-details-section",children:[(0,l.jsx)("h3",{children:(0,s.__)("File Information","bcgov-design-system")}),(0,l.jsxs)("div",{className:"document-details-info",children:[(0,l.jsxs)("div",{className:"document-details-info-item",children:[(0,l.jsx)("span",{className:"document-details-label",children:(0,s.__)("File Type:","bcgov-design-system")}),(0,l.jsx)("span",{className:"document-details-value",children:i.document_file_type?i.document_file_type.split("/").pop().toUpperCase():(0,s.__)("Unknown","bcgov-design-system")})]}),(0,l.jsxs)("div",{className:"document-details-info-item",children:[(0,l.jsx)("span",{className:"document-details-label",children:(0,s.__)("File Size:","bcgov-design-system")}),(0,l.jsx)("span",{className:"document-details-value",children:i.document_file_size?u(i.document_file_size):(0,s.__)("Unknown","bcgov-design-system")})]}),(0,l.jsxs)("div",{className:"document-details-info-item",children:[(0,l.jsx)("span",{className:"document-details-label",children:(0,s.__)("Filename:","bcgov-design-system")}),(0,l.jsx)("span",{className:"document-details-value",children:i.document_file_name||(0,s.__)("Unknown","bcgov-design-system")})]})]})]}),(0,l.jsxs)("div",{className:"document-details-section",children:[(0,l.jsx)("h3",{children:(0,s.__)("Document Information","bcgov-design-system")}),(0,l.jsxs)("div",{className:"document-details-info",children:[(0,l.jsxs)("div",{className:"document-details-info-item",children:[(0,l.jsx)("span",{className:"document-details-label",children:(0,s.__)("Upload Date:","bcgov-design-system")}),(0,l.jsx)("span",{className:"document-details-value",children:d(t.date)})]}),(0,l.jsxs)("div",{className:"document-details-info-item",children:[(0,l.jsx)("span",{className:"document-details-label",children:(0,s.__)("Author:","bcgov-design-system")}),(0,l.jsx)("span",{className:"document-details-value",children:t.author||""})]}),n.map((function(e){return(0,l.jsxs)("div",{className:"document-details-info-item",children:[(0,l.jsxs)("span",{className:"document-details-label",children:[e.label,":"]}),(0,l.jsx)("span",{className:"document-details-value",children:void 0!==i[e.id]?i[e.id]:"—"})]},e.id)}))]})]}),i.document_file_type&&i.document_file_url&&i.document_file_type.startsWith("image/")&&(0,l.jsxs)("div",{className:"document-details-section",children:[(0,l.jsx)("h3",{children:(0,s.__)("Preview","bcgov-design-system")}),(0,l.jsx)("div",{className:"document-preview",children:(0,l.jsx)("img",{src:i.document_file_url,alt:t.title||"",className:"document-preview-image"})})]}),i.document_file_type&&i.document_file_url&&"application/pdf"===i.document_file_type&&(0,l.jsxs)("div",{className:"document-details-section",children:[(0,l.jsx)("h3",{children:(0,s.__)("Preview","bcgov-design-system")}),(0,l.jsx)("div",{className:"document-preview",children:(0,l.jsx)("iframe",{src:"".concat(i.document_file_url,"#view=FitH"),title:t.title||"",className:"document-preview-pdf"})})]})]})]})};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(){y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),s=new C(n||[]);return o(i,"_invoke",{value:k(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",m="executing",v="completed",g={};function b(){}function x(){}function w(){}var j={};l(j,i,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(T([])));S&&S!==r&&n.call(S,i)&&(j=S);var E=w.prototype=b.prototype=Object.create(j);function N(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,a,i,s){var c=d(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==p(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(p(t)+" is not iterable")}return x.prototype=w,o(E,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:x,configurable:!0}),x.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},N(O.prototype),l(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(E),l(E,c,"Generator"),l(E,i,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function g(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,s,"next",e)}function s(e){g(a,n,o,i,s,"throw",e)}i(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var k=window.documentRepositorySettings.apiNamespace,P=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},L=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(e,t,r){return t=N(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,r||[],N(e).constructor):t.apply(e,r))}(this,e,[t])).state={hasError:!1,error:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(e,React.Component),t=e,n=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}],(r=[{key:"componentDidCatch",value:function(e,t){console.error("Document list error:",e,t)}},{key:"render",value:function(){return this.state.hasError?(0,l.jsxs)(o.Notice,{status:"error",isDismissible:!1,children:[(0,l.jsx)("p",{children:(0,s.__)("Something went wrong displaying documents.","bcgov-design-system")}),(0,l.jsx)("pre",{children:this.state.error&&this.state.error.toString()})]}):this.props.children}}])&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),D=function(e){var t=e.children,r=e.rowKey;try{return(0,l.jsx)(React.Fragment,{children:t},r)}catch(e){return console.error("Render error:",e),(0,l.jsx)("div",{className:"document-table-row error",role:"row",children:(0,l.jsxs)("div",{className:"document-table-cell",role:"cell",colSpan:"8",children:[(0,s.__)("Error rendering item:","bcgov-design-system")," ",e.message]})},"error-".concat(r))}};const C=function(e){var t,r,a,c=e.documents,u=void 0===c?[]:c,d=(e.isLoading,e.totalItems,e.currentPage),p=void 0===d?1:d,h=e.totalPages,g=void 0===h?1:h,_=e.onPageChange,S=e.onDelete,E=e.isDeleting,N=void 0!==E&&E,O=e.selectedDocuments,C=void 0===O?[]:O,T=e.onSelectDocument,F=e.onSelectAll,R=(e.onUploadSuccess,e.onFileDrop),A=e.onDocumentsUpdate,I=e.metadataFields,M=void 0===I?[]:I,U=x((0,n.useState)(u),2),B=U[0],G=U[1],$=x((0,n.useState)(null),2),z=$[0],q=$[1],V=x((0,n.useState)(null),2),W=V[0],H=V[1],Y=x((0,n.useState)(null),2),K=Y[0],J=(Y[1],x((0,n.useState)(!1),2)),X=J[0],Q=J[1],Z=x((0,n.useState)(null),2),ee=(Z[0],Z[1]),te=x((0,n.useState)([]),2),re=te[0],ne=te[1],oe=x((0,n.useState)(!1),2),ae=oe[0],ie=oe[1],se=x((0,n.useState)(!1),2),ce=se[0],le=se[1],ue=x((0,n.useState)(!1),2),de=ue[0],fe=(ue[1],x((0,n.useState)(null),2)),pe=fe[0],he=fe[1],me=x((0,n.useState)({}),2),ve=me[0],ye=me[1],ge=x((0,n.useState)({}),2),be=ge[0],xe=ge[1],we=x((0,n.useState)(!1),2),je=we[0],_e=we[1],Se=x((0,n.useState)(!1),2),Ee=Se[0],Ne=Se[1],Oe=x((0,n.useState)({}),2),ke=Oe[0],Pe=Oe[1],Le=x((0,n.useState)(!1),2),De=Le[0],Ce=Le[1],Te=x((0,n.useState)(null),2),Fe=Te[0],Re=Te[1],Ae=(0,n.useRef)(null);(0,n.useEffect)((function(){G(u)}),[u]);var Ie=function(){var e=b(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:H(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=b(y().mark((function e(t){var r,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=Array.from(t.target.files)).length>0)){e.next=12;break}if(ie(!0),ne([{id:"placeholder",name:sprintf((0,s.__)("Preparing %d files...","bcgov-design-system"),r.length),status:"processing",error:null,isPlaceholder:!0}]),ne(r.map((function(e){return{id:Math.random().toString(36).substr(2,9),name:e.name,status:"processing",error:null}}))),0!==(n=r.filter((function(e){return"application/pdf"===e.type||e.name.toLowerCase().endsWith(".pdf")}))).length){e.next=10;break}return ne((function(e){return e.map((function(e){return m(m({},e),{},{status:"error",error:"Only PDF files are allowed."})}))})),ee("Only PDF files are allowed."),e.abrupt("return");case 10:r.length!==n.length?(ne((function(e){return e.map((function(e){var t=e.name.toLowerCase().endsWith(".pdf");return m(m({},e),{},{status:t?"uploading":"error",error:t?null:"Not a PDF file"})}))})),ee("Some files were skipped because they are not PDFs.")):ne((function(e){return e.map((function(e){return m(m({},e),{},{status:"uploading"})}))})),n.forEach((function(e){R(e).then((function(){ne((function(t){return t.map((function(t){return t.name===e.name?m(m({},t),{},{status:"success"}):t}))}))})).catch((function(t){ne((function(r){return r.map((function(r){return r.name===e.name?m(m({},r),{},{status:"error",error:t.message}):r}))}))}))}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){console.log("Upload modal state changed:",K)}),[K]),(0,n.useEffect)((function(){console.log("DocumentList component rendered, uploadModal state:",K)}));var Ue=B.length>0&&C.length===B.length,Be=function(e,t){ye((function(r){return m(m({},r),{},v({},e,t))})),xe((function(t){return m(m({},t),{},v({},e,""))}))},Ge=function(){var e=b(y().mark((function e(t){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_e(!0),e.prev=2,e.next=5,i()({path:"/".concat(k,"/documents/").concat(pe.id,"/metadata"),method:"POST",data:ve});case 5:e.sent,G((function(e){return e.map((function(e){return e.id===pe.id?m(m({},e),{},{metadata:m(m({},e.metadata),ve)}):e}))})),he(null),ye({}),xe({}),Re({status:"success",message:(0,s.__)("Document metadata updated successfully","bcgov-design-system")}),setTimeout((function(){return Re(null)}),3e3),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Error updating metadata:",e.t0),null!==(r=e.t0.data)&&void 0!==r&&r.errors?xe(e.t0.data.errors):Re({status:"error",message:e.t0.message||(0,s.__)("Failed to update metadata","bcgov-design-system")});case 18:return e.prev=18,_e(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,14,18,21]])})));return function(t){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){if(Ee){var e={};B.forEach((function(t){e[t.id]=t.metadata||{}})),Pe(e)}}),[Ee,B]);var $e=function(e,t,r){Pe((function(n){return m(m({},n),{},v({},e,m(m({},n[e]||{}),{},v({},t,r))))}))},ze=function(){var e=b(y().mark((function e(){var t,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce(!0),ee(null),e.prev=2,t=Object.entries(ke).map((function(e){var t=x(e,2),r=t[0],n=t[1];return i()({path:"/".concat(k,"/documents/").concat(r,"/metadata"),method:"POST",data:n,headers:{"Content-Type":"application/json"}})})),e.next=6,Promise.all(t);case 6:r=B.map((function(e){return m(m({},e),{},{metadata:ke[e.id]||e.metadata})})),G(r),"function"==typeof A&&A(r),Ne(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Error saving bulk metadata:",e.t0),ee(e.t0.message||"Failed to save metadata changes");case 16:return e.prev=16,Ce(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})));return function(){return e.apply(this,arguments)}}();return(0,l.jsx)(L,{children:(0,l.jsxs)("div",{className:"document-list-container ".concat(X?"dragging":""),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),Q(!0)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),X||Q(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),!e.currentTarget.contains(e.relatedTarget)&&Q(!1)},onDrop:function(e){e.preventDefault(),e.stopPropagation(),Q(!1);var t=e.dataTransfer.files;if(t&&t.length>0){var r=Array.from(t);ie(!0),ne([{id:"placeholder",name:sprintf((0,s.__)("Preparing %d files...","bcgov-design-system"),r.length),status:"processing",error:null,isPlaceholder:!0}]),ne(r.map((function(e){return{id:Math.random().toString(36).substr(2,9),name:e.name,status:"processing",error:null}})));var n=r.filter((function(e){return"application/pdf"===e.type||e.name.toLowerCase().endsWith(".pdf")}));if(0===n.length)return ne((function(e){return e.map((function(e){return m(m({},e),{},{status:"error",error:"Only PDF files are allowed."})}))})),void ee("Only PDF files are allowed.");r.length!==n.length?(ne((function(e){return e.map((function(e){var t=e.name.toLowerCase().endsWith(".pdf");return m(m({},e),{},{status:t?"uploading":"error",error:t?null:"Not a PDF file"})}))})),ee("Some files were skipped because they are not PDFs.")):ne((function(e){return e.map((function(e){return m(m({},e),{},{status:"uploading"})}))})),n.forEach((function(e){R(e).then((function(){ne((function(t){return t.map((function(t){return t.name===e.name?m(m({},t),{},{status:"success"}):t}))}))})).catch((function(t){ne((function(r){return r.map((function(r){return r.name===e.name?m(m({},r),{},{status:"error",error:t.message}):r}))}))}))}))}},children:[Fe&&(0,l.jsx)(o.Notice,{status:Fe.status,isDismissible:!0,onRemove:function(){return Re(null)},children:Fe.message}),(0,l.jsx)("input",{type:"file",ref:Ae,onChange:Me,style:{display:"none"},accept:"application/pdf,.pdf",multiple:!0}),(0,l.jsxs)("div",{className:"document-list-actions",children:[(0,l.jsxs)("div",{className:"document-list-left-actions",children:[(0,l.jsx)("div",{className:"document-list-upload-hint-container",children:(0,l.jsxs)("button",{className:"document-list-upload-hint",onClick:function(){Ae.current&&Ae.current.click()},children:[(0,l.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",children:(0,l.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z",fill:"currentColor"})}),(0,s.__)("Upload Documents","bcgov-design-system")]})}),C.length>0&&(0,l.jsx)(o.Button,{isDestructive:!0,onClick:function(){return le(!0)},className:"bulk-delete-button",icon:(0,l.jsx)("span",{className:"dashicons dashicons-trash"}),children:sprintf((0,s.__)("Delete Selected (%d)","bcgov-design-system"),C.length)})]}),B.length>0&&(0,l.jsxs)("div",{className:"mode-toggle",children:[(0,l.jsx)(o.Button,{variant:Ee?"primary":"secondary",onClick:function(){return Ne(!Ee)},children:Ee?(0,s.__)("Exit Spreadsheet Mode","bcgov-design-system"):(0,s.__)("Edit as Spreadsheet","bcgov-design-system")}),Ee&&(0,l.jsx)(o.Button,{variant:"primary",onClick:ze,disabled:De,style:{marginLeft:"8px"},children:De?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Spinner,{}),(0,s.__)("Saving...","bcgov-design-system")]}):(0,s.__)("Save All Changes","bcgov-design-system")})]})]}),(0,l.jsxs)("div",{className:"document-table",role:"table",children:[(0,l.jsx)("div",{className:"document-table-header",role:"rowgroup",children:(0,l.jsxs)("div",{className:"document-table-row",role:"row",children:[(0,l.jsx)("div",{className:"document-table-cell header",role:"columnheader",children:(0,l.jsx)(o.CheckboxControl,{checked:Ue,onChange:F})}),(0,l.jsx)("div",{className:"document-table-cell header",role:"columnheader",children:(0,s.__)("Title","bcgov-design-system")}),M.map((function(e){return(0,l.jsx)("div",{className:"document-table-cell header metadata-column",role:"columnheader",children:e.label},e.id)})),(0,l.jsx)("div",{className:"document-table-cell header",role:"columnheader",children:(0,s.__)("Size","bcgov-design-system")}),(0,l.jsx)("div",{className:"document-table-cell header",role:"columnheader",children:(0,s.__)("Type","bcgov-design-system")}),(0,l.jsx)("div",{className:"document-table-cell header",role:"columnheader",children:(0,s.__)("Actions","bcgov-design-system")})]})}),(0,l.jsx)("div",{className:"document-table-body",role:"rowgroup",children:B.map((function(e){return(0,l.jsx)(D,{rowKey:e.id,children:(0,l.jsxs)("div",{className:"document-table-row ".concat(C.includes(e.id)?"selected":""),role:"row",onClick:function(){return!Ee&&function(e){q(e)}(e)},children:[(0,l.jsx)("div",{className:"document-table-cell",role:"cell",onClick:function(e){return e.stopPropagation()},children:(0,l.jsx)(o.CheckboxControl,{checked:C.includes(e.id),onChange:function(){return T(e.id)}})}),(0,l.jsx)("div",{className:"document-table-cell",role:"cell",children:e.title||e.filename}),M.map((function(t){var r,n,a,i;return(0,l.jsx)("div",{className:"document-table-cell metadata-column",role:"cell",onClick:function(e){return e.stopPropagation()},children:Ee?"select"===t.type?(0,l.jsx)(o.SelectControl,{value:(null===(r=ke[e.id])||void 0===r?void 0:r[t.id])||"",options:[{label:(0,s.__)("Select...","bcgov-design-system"),value:""}].concat((i=(t.options||[]).map((function(e){return{label:e,value:e}})),function(e){if(Array.isArray(e))return j(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||w(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),onChange:function(r){return $e(e.id,t.id,r)}}):"date"===t.type?(0,l.jsx)(o.TextControl,{type:"date",value:(null===(n=ke[e.id])||void 0===n?void 0:n[t.id])||"",onChange:function(r){return $e(e.id,t.id,r)},className:"metadata-input"}):(0,l.jsx)(o.TextControl,{value:(null===(a=ke[e.id])||void 0===a?void 0:a[t.id])||"",onChange:function(r){return $e(e.id,t.id,r)},className:"metadata-input"}):e.metadata&&e.metadata[t.id]?e.metadata[t.id]:"—"},t.id)})),(0,l.jsx)("div",{className:"document-table-cell",role:"cell",children:e.metadata&&e.metadata.document_file_size?P(e.metadata.document_file_size):"—"}),(0,l.jsx)("div",{className:"document-table-cell",role:"cell",children:e.metadata&&e.metadata.document_file_type?e.metadata.document_file_type:"—"}),(0,l.jsx)("div",{className:"document-table-cell actions",role:"cell",onClick:function(e){return e.stopPropagation()},children:!Ee&&(0,l.jsxs)("div",{className:"action-buttons",children:[(0,l.jsx)(o.Button,{variant:"secondary",onClick:function(){return function(e){var t,r=m(m({},e),{},{upload_date:e.date||e.upload_date||(null===(t=e.metadata)||void 0===t?void 0:t.upload_date)});he(r);var n={};M.forEach((function(t){var r;n[t.id]=(null===(r=e.metadata)||void 0===r?void 0:r[t.id])||""})),ye(n),xe({})}(e)},className:"icon-button",title:(0,s.__)("Edit Metadata","bcgov-design-system"),"aria-label":(0,s.__)("Edit Metadata","bcgov-design-system"),children:(0,l.jsx)("span",{className:"dashicons dashicons-edit"})}),(0,l.jsx)(o.Button,{isDestructive:!0,onClick:function(){return H(e)},disabled:N,className:"icon-button",title:(0,s.__)("Delete","bcgov-design-system"),"aria-label":(0,s.__)("Delete","bcgov-design-system"),children:(0,l.jsx)("span",{className:"dashicons dashicons-trash"})})]})})]})},e.id)}))})]}),g>1&&(0,l.jsx)(o.Pagination,{currentPage:p,totalPages:g,onPageChange:_}),X&&(0,l.jsx)("div",{className:"document-drop-overlay",children:(0,l.jsxs)("div",{className:"document-drop-message",children:[(0,l.jsxs)("svg",{viewBox:"0 0 64 64",width:"64",height:"64",children:[(0,l.jsx)("path",{d:"M32 16v24M20 28l12-12 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M16 48h32M12 20v28c0 2.2 1.8 4 4 4h32c2.2 0 4-1.8 4-4V20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),(0,s.__)("Drop files to upload","bcgov-design-system")]})}),z&&(0,l.jsx)(f,{document:z,onClose:function(){return q(null)}}),W&&(0,l.jsx)(o.Modal,{title:(0,s.__)("Delete Document","bcgov-design-system"),onRequestClose:function(){return H(null)},children:(0,l.jsxs)("div",{className:"delete-confirmation-content",children:[(0,l.jsxs)("p",{children:[(0,s.__)("Are you sure you want to delete","bcgov-design-system")," ",(0,l.jsxs)("strong",{children:['"',W.title||W.filename,'"']}),"?"]}),(0,l.jsxs)("div",{className:"modal-actions",children:[(0,l.jsx)(o.Button,{isDestructive:!0,onClick:function(){return Ie(W.id)},disabled:N,children:N?(0,s.__)("Deleting...","bcgov-design-system"):(0,s.__)("Delete","bcgov-design-system")}),(0,l.jsx)(o.Button,{onClick:function(){return H(null)},disabled:N,children:(0,s.__)("Cancel","bcgov-design-system")})]})]})}),function(){if(!ae||0===re.length)return null;var e=re.filter((function(e){return"success"===e.status})).length,t=re.filter((function(e){return"error"===e.status})).length,r=re.filter((function(e){return"uploading"===e.status})).length,n=re.filter((function(e){return"processing"===e.status})).length,a=re.some((function(e){return e.isPlaceholder}));return(0,l.jsxs)("div",{className:"upload-feedback",children:[(0,l.jsxs)("div",{className:"upload-feedback-header",children:[(0,l.jsxs)("div",{className:"upload-feedback-title",children:[(0,l.jsx)("span",{className:"dashicons dashicons-upload"}),(0,s.__)("Document Upload Status","bcgov-design-system")]}),(0,l.jsx)("button",{className:"upload-feedback-close",onClick:function(){0===r&&0===n&&(ie(!1),ne([]))},children:(0,l.jsx)("span",{className:"dashicons dashicons-no-alt"})})]}),(0,l.jsx)("div",{className:"upload-feedback-items",children:re.map((function(e){return(0,l.jsxs)("div",{className:"upload-feedback-item ".concat(e.status," ").concat(e.isPlaceholder?"placeholder":""),children:[(0,l.jsx)("span",{className:"upload-feedback-item-name",children:e.name}),"processing"===e.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Spinner,{}),(0,l.jsx)("span",{className:"dashicons dashicons-update"})]}),"uploading"===e.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Spinner,{}),(0,l.jsx)("span",{className:"dashicons dashicons-cloud-upload"})]}),"success"===e.status&&(0,l.jsx)("span",{className:"dashicons dashicons-yes-alt"}),"error"===e.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"dashicons dashicons-warning"}),e.error&&(0,l.jsx)("span",{className:"upload-feedback-item-error",children:e.error})]})]},e.id)}))}),(0,l.jsx)("div",{className:"upload-feedback-summary",children:a?(0,l.jsxs)("div",{className:"processing",children:[(0,l.jsx)("span",{className:"dashicons dashicons-update"}),(0,s.__)("Preparing files...","bcgov-design-system")]}):(0,l.jsxs)(l.Fragment,{children:[n>0&&(0,l.jsxs)("div",{className:"processing",children:[(0,l.jsx)("span",{className:"dashicons dashicons-update"}),sprintf((0,s.__)("Processing %d files...","bcgov-design-system"),n)]}),r>0&&(0,l.jsxs)("div",{className:"uploading",children:[(0,l.jsx)("span",{className:"dashicons dashicons-cloud-upload"}),sprintf((0,s.__)("Uploading %d files...","bcgov-design-system"),r)]}),e>0&&(0,l.jsxs)("div",{className:"success",children:[(0,l.jsx)("span",{className:"dashicons dashicons-yes-alt"}),sprintf((0,s.__)("%d files uploaded successfully","bcgov-design-system"),e)]}),t>0&&(0,l.jsxs)("div",{className:"error",children:[(0,l.jsx)("span",{className:"dashicons dashicons-warning"}),sprintf((0,s.__)("%d files failed to upload","bcgov-design-system"),t)]})]})})]})}(),ce&&(0,l.jsx)(o.Modal,{title:(0,s.__)("Delete Selected Documents","bcgov-design-system"),onRequestClose:function(){return le(!1)},children:(0,l.jsxs)("div",{className:"delete-confirmation-content",children:[(0,l.jsx)("p",{children:sprintf((0,s.__)("Are you sure you want to delete %d selected document(s)?","bcgov-design-system"),C.length)}),(0,l.jsx)("p",{className:"delete-warning",children:(0,s.__)("This action cannot be undone.","bcgov-design-system")}),(0,l.jsxs)("div",{className:"modal-actions",children:[(0,l.jsx)(o.Button,{isDestructive:!0,onClick:handleBulkDelete,disabled:de,children:de?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Spinner,{}),(0,s.__)("Deleting...","bcgov-design-system")]}):(0,s.__)("Delete Selected","bcgov-design-system")}),(0,l.jsx)(o.Button,{onClick:function(){return le(!1)},disabled:de,children:(0,s.__)("Cancel","bcgov-design-system")})]})]})}),pe&&(0,l.jsx)(o.Modal,{title:(0,s.__)("Edit Document Metadata","bcgov-design-system"),onRequestClose:function(){he(null),ye({}),xe({})},className:"metadata-edit-modal",children:(0,l.jsxs)("form",{onSubmit:Ge,className:"metadata-edit-form",children:[(0,l.jsxs)("div",{className:"editable-metadata",children:[(0,l.jsx)("h3",{children:(0,s.__)("Custom Metadata","bcgov-design-system")}),M.map((function(e){var t=be[e.id];return(0,l.jsxs)("div",{className:"metadata-field",children:["select"===e.type?(0,l.jsx)(o.SelectControl,{label:e.label,value:ve[e.id]||"",options:e.options.map((function(e){return{label:e,value:e}})),onChange:function(t){return Be(e.id,t)}}):(0,l.jsx)(o.TextControl,{label:e.label,value:ve[e.id]||"",onChange:function(t){return Be(e.id,t)},type:"date"===e.type?"date":"text"}),t&&(0,l.jsx)("div",{className:"metadata-error",children:t})]},e.id)}))]}),(0,l.jsxs)("div",{className:"non-editable-metadata",children:[(0,l.jsx)("h3",{children:(0,s.__)("Document Information","bcgov-design-system")}),(0,l.jsxs)("div",{className:"metadata-field",children:[(0,l.jsx)("label",{children:(0,s.__)("Filename","bcgov-design-system")}),(0,l.jsx)("div",{className:"field-value",children:((null===(t=pe.metadata)||void 0===t?void 0:t.document_file_name)||pe.filename||pe.title||"").replace(/\.pdf$/i,"")||(0,s.__)("Not available","bcgov-design-system")})]}),(0,l.jsxs)("div",{className:"metadata-field",children:[(0,l.jsx)("label",{children:(0,s.__)("File Type","bcgov-design-system")}),(0,l.jsx)("div",{className:"field-value",children:(null===(r=pe.metadata)||void 0===r?void 0:r.document_file_type)||"PDF"})]}),(0,l.jsxs)("div",{className:"metadata-field",children:[(0,l.jsx)("label",{children:(0,s.__)("File Size","bcgov-design-system")}),(0,l.jsx)("div",{className:"field-value",children:null!==(a=pe.metadata)&&void 0!==a&&a.document_file_size?P(parseInt(pe.metadata.document_file_size)):(0,s.__)("Not available","bcgov-design-system")})]})]}),(0,l.jsxs)("div",{className:"modal-actions",children:[(0,l.jsx)(o.Button,{variant:"secondary",onClick:function(){he(null),ye({}),xe({})},children:(0,s.__)("Cancel","bcgov-design-system")}),(0,l.jsx)(o.Button,{variant:"primary",type:"submit",isBusy:je,disabled:je,children:(0,s.__)("Save Changes","bcgov-design-system")})]})]})})]})})};function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function F(){F=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new L(n||[]);return o(i,"_invoke",{value:N(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function y(){}function g(){}function b(){}var x={};l(x,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(D([])));j&&j!==r&&n.call(j,i)&&(x=j);var _=b.prototype=y.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var c=d(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==T(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,r,n){var o=f;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=O(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(T(t)+" is not iterable")}return g.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(_),l(_,c,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=G(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function A(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return(t=function(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return $(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const z=function(e){var t=e.metadataFields,r=e.onUploadSuccess,a=e.selectedFile,i=void 0===a?null:a,c=e.modalMode,u=void 0!==c&&c;console.log("DocumentUploader mounted with props:",{modalMode:u,selectedFile:i?{name:i.name,size:i.size,type:i.type}:null,metadataFieldsCount:Array.isArray(t)?t.length:0});var d=B((0,n.useState)(i),2),f=d[0],p=d[1],h=B((0,n.useState)(!1),2),m=h[0],v=h[1],y=B((0,n.useState)(0),2),g=y[0],b=y[1],x=B((0,n.useState)(null),2),w=x[0],j=x[1],_=B((0,n.useState)(!1),2),S=_[0],E=_[1],N=B((0,n.useState)(!1),2),O=N[0],k=N[1],P=(0,n.useRef)(null),L=B((0,n.useState)(i?i.name.split(".")[0]:""),2),D=L[0],C=L[1],T=B((0,n.useState)({}),2),I=T[0],z=T[1],q=window.documentRepositorySettings,V=q.apiNamespace,W=q.maxFileSize,H=q.allowedMimeTypes;(0,n.useEffect)((function(){if(i){console.log("Selected file prop detected:",i.name),p(i);var e=i.name,t=e.includes(".")?e.substring(0,e.lastIndexOf(".")):e;C(t),Y(i)||console.error("Initial file validation failed, but still setting file for UI")}}),[i]);var Y=function(e){if(!e)return!1;if(e.size>W){var t="File is too large. Maximum allowed size is ".concat(Math.round(W/1048576)," MB.");return console.error("Validation error:",t),j(t),!1}var r=e.name.split(".").pop().toLowerCase(),n=Object.keys(H);if(!n.includes(r)){var o="Invalid file type. Allowed types are: ".concat(n.join(", "));return console.error("Validation error:",o),j(o),!1}return j(null),!0},K=function(e){if(!e)return console.log("No file provided to validate"),!1;if(console.log("Validating file:",e.name,"Size:",e.size),Y(e)){console.log("File validation passed, setting file and title"),p(e);var t=e.name.includes(".")?e.name.substring(0,e.name.lastIndexOf(".")):e.name;return C(t),!0}return!1},J=function(e){var t=e.target.files[0];K(t)},X=function(e,t){z((function(r){return M(M({},r),{},U({},e,t))}))},Q=function(){var e,n=(e=F().mark((function e(){var n,o,a,i,c,l,d,h,m,y;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Beginning upload process for file:",null==f?void 0:f.name),o=t.filter((function(e){return e.required})),a=R(o),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=12;break}if(c=i.value,I[c.id]){e.next=10;break}return j((0,s.__)("Please fill in all required fields.","bcgov-design-system")),e.abrupt("return");case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:if(f){e.next=23;break}return j((0,s.__)("Please select a file to upload.","bcgov-design-system")),e.abrupt("return");case 23:if(D){e.next=26;break}return j((0,s.__)("Please enter a title for the document.","bcgov-design-system")),e.abrupt("return");case 26:return v(!0),j(null),b(0),(l=new FormData).append("file",f),l.append("title",D),d=JSON.stringify(I),l.append("metadata",d),console.log("FormData prepared, sending to server"),console.log("API settings check:",{apiRoot:window.documentRepositorySettings.apiRoot,apiNamespace:V,nonceExists:!!window.documentRepositorySettings.nonce,nonceLength:null===(n=window.documentRepositorySettings.nonce)||void 0===n?void 0:n.length,isLoggedIn:!!document.body.classList.contains("logged-in"),userRole:window.documentRepositorySettings.userRole||"unknown",currentUserId:void 0!==window.userSettings?window.userSettings.uid:"not set"}),e.prev=36,(h=new XMLHttpRequest).upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);console.log("Upload progress:",t+"%"),b(t)}})),m=new Promise((function(e,t){h.open("POST","".concat(window.documentRepositorySettings.apiRoot).concat(V,"/documents")),h.setRequestHeader("X-WP-Nonce",window.documentRepositorySettings.nonce),h.setRequestHeader("Accept","application/json"),h.withCredentials=!0,console.log("Using nonce:",window.documentRepositorySettings.nonce),console.log("API endpoint:","".concat(window.documentRepositorySettings.apiRoot).concat(V,"/documents")),h.onload=function(){if(h.status>=200&&h.status<300)try{var r=JSON.parse(h.responseText);console.log("Upload successful:",r),e(r)}catch(e){console.error("Error parsing response:",h.responseText),t(new Error("Server error: ".concat(h.responseText.substring(0,100),"...")))}else console.error("HTTP error:",h.status,h.statusText),console.error("Response:",h.responseText),403===h.status?(console.error("403 Forbidden - Authentication error. Headers:",h.getAllResponseHeaders()),t(new Error("Authentication error - please refresh the page and try again"))):t(new Error(h.statusText||"Server error"))},h.onerror=function(){console.error("Network error during upload"),t(new Error("Network Error"))},h.send(l)})),e.next=42,m;case 42:y=e.sent,E(!0),v(!1),r&&(console.log("Notifying parent of successful upload"),r(y)),u||(p(null),C(""),z({})),e.next=54;break;case 49:e.prev=49,e.t1=e.catch(36),console.error("Upload error:",e.t1),j(e.t1.message||(0,s.__)("Error uploading document. Please try again or contact support.","bcgov-design-system")),v(!1);case 54:case"end":return e.stop()}}),e,null,[[3,14,17,20],[36,49]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){A(a,n,o,i,s,"next",e)}function s(e){A(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),Z=function(e){var t,r=e.id,n=e.label,a=e.type,i=e.options,c=e.required;switch(a){case"text":return(0,l.jsx)(o.TextControl,{label:n,value:I[r]||"",onChange:function(e){return X(r,e)},required:c},r);case"select":return(0,l.jsx)(o.SelectControl,{label:n,value:I[r]||"",options:[{label:(0,s.__)("Select...","bcgov-design-system"),value:""}].concat((t=Object.entries(i).map((function(e){var t=B(e,2),r=t[0];return{label:t[1],value:r}})),function(e){if(Array.isArray(e))return $(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||G(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),onChange:function(e){return X(r,e)},required:c},r);case"date":return(0,l.jsx)(o.TextControl,{label:n,type:"date",value:I[r]||"",onChange:function(e){return X(r,e)},required:c},r);default:return null}};return u?(console.log("DocumentUploader rendering in modal mode with file:",null==f?void 0:f.name),(0,n.useEffect)((function(){!f&&i&&(p(i),console.log("Modal mode: Setting file from props",i.name))}),[i,f]),(0,l.jsxs)("div",{className:"document-uploader-modal",children:[w&&(0,l.jsx)(o.Notice,{status:"error",isDismissible:!0,onRemove:function(){return j(null)},children:w}),S&&(0,l.jsx)(o.Notice,{status:"success",isDismissible:!0,onRemove:function(){return E(!1)},children:(0,s.__)("Document uploaded successfully!","bcgov-design-system")}),(0,l.jsx)("div",{className:"selected-file-info",children:f?(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"File:"})," ",f.name," (",Math.round(f.size/1024)," KB)"]}):i?(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"File:"})," ",i.name," (",Math.round(i.size/1024)," KB)"]}):(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Warning:"})," No file selected"]})}),(0,l.jsx)(o.TextControl,{label:(0,s.__)("Document Title","bcgov-design-system"),value:D,onChange:C,disabled:m,required:!0}),(0,l.jsx)("h4",{children:(0,s.__)("Document Metadata","bcgov-design-system")}),(0,l.jsx)("div",{className:"metadata-fields modal-layout",children:t.map(Z)}),m&&(0,l.jsxs)("div",{className:"upload-progress",children:[(0,l.jsx)("progress",{value:g,max:"100"}),(0,l.jsxs)("p",{children:[g,"% ",(0,s.__)("Uploaded","bcgov-design-system")]})]}),(0,l.jsx)("div",{className:"modal-actions",children:(0,l.jsx)(o.Button,{isPrimary:!0,onClick:Q,disabled:!f&&!i||!D||m,children:m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Spinner,{}),(0,s.__)("Uploading...","bcgov-design-system")]}):(0,s.__)("Upload Document","bcgov-design-system")})})]})):(0,l.jsxs)(o.Card,{className:"document-uploader",children:[(0,l.jsx)(o.CardHeader,{children:(0,l.jsx)("h3",{children:(0,s.__)("Upload Document","bcgov-design-system")})}),(0,l.jsx)(o.CardBody,{children:(0,l.jsxs)(l.Fragment,{children:[S&&(0,l.jsx)(o.Notice,{status:"success",isDismissible:!0,onRemove:function(){return E(!1)},children:(0,s.__)("Document uploaded successfully!","bcgov-design-system")}),w&&(0,l.jsx)(o.Notice,{status:"error",isDismissible:!0,onRemove:function(){return j(null)},children:w}),!u&&!f&&(0,l.jsxs)("div",{className:"document-uploader-dropzone ".concat(O?"dragging":""),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),console.log("DocumentUploader - Drag enter detected"),k(!0)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),k(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),!e.currentTarget.contains(e.relatedTarget)&&(console.log("DocumentUploader - Drag leave detected - leaving container"),k(!1))},onDrop:function(e){e.preventDefault(),e.stopPropagation(),k(!1),console.log("DocumentUploader - Drop detected");var t=e.dataTransfer.files;t&&t.length>0?(console.log("DocumentUploader - File dropped:",t[0].name),K(t[0])):console.warn("DocumentUploader - Drop event had no files")},onClick:function(){console.log("DocumentUploader - Dropzone clicked"),P.current&&(console.log("DocumentUploader - Triggering file input click"),P.current.click())},children:[(0,l.jsx)("input",{type:"file",ref:P,onChange:J,style:{display:"none"},accept:Object.values(H).join(",")}),(0,l.jsx)("div",{className:"dropzone-icon",children:(0,l.jsxs)("svg",{viewBox:"0 0 64 64",width:"64",height:"64",children:[(0,l.jsx)("path",{d:"M32 16v24M20 28l12-12 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M16 48h32M12 20v28c0 2.2 1.8 4 4 4h32c2.2 0 4-1.8 4-4V20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,l.jsxs)("div",{className:"dropzone-text",children:[(0,l.jsx)("p",{className:"primary-text",children:O?(0,s.__)("Drop file here","bcgov-design-system"):(0,s.__)("Drag & drop your file here or click to browse","bcgov-design-system")}),(0,l.jsxs)("p",{className:"secondary-text",children:[(0,s.__)("Accepted file types:","bcgov-design-system")," ",Object.keys(H).join(", ")]}),(0,l.jsxs)("p",{className:"secondary-text",children:[(0,s.__)("Maximum file size:","bcgov-design-system")," ",Math.round(W/1048576)," MB"]})]})]}),u&&!f&&(0,l.jsx)("div",{className:"document-uploader-file-select",children:(0,l.jsx)(o.FormFileUpload,{accept:Object.values(H).join(","),onChange:J,children:(0,s.__)("Select a different file","bcgov-design-system")})}),f&&(0,l.jsxs)("div",{className:"selected-file-container",children:[(0,l.jsxs)("div",{className:"selected-file",children:[(0,l.jsx)("span",{className:"file-name",children:f.name}),(0,l.jsx)("button",{type:"button",className:"remove-file",onClick:function(){return p(null)},children:"✕"})]}),!u&&(0,l.jsx)(o.FormFileUpload,{accept:Object.values(H).join(","),onChange:J,children:(0,s.__)("Select a different file","bcgov-design-system")})]}),m&&(0,l.jsxs)("div",{className:"upload-progress",children:[(0,l.jsx)("progress",{value:g,max:"100"}),(0,l.jsxs)("p",{children:[g,"% ",(0,s.__)("Uploaded","bcgov-design-system")]})]}),(0,l.jsx)(o.TextControl,{label:(0,s.__)("Document Title","bcgov-design-system"),value:D,onChange:C,disabled:m,required:!0}),(0,l.jsx)("h4",{children:(0,s.__)("Document Metadata","bcgov-design-system")}),(0,l.jsx)("div",{className:"metadata-fields ".concat(u?"modal-layout":""),children:t.map(Z)})]})}),(0,l.jsx)(o.CardFooter,{children:(0,l.jsx)("div",{className:"card-actions",children:(0,l.jsx)(o.Button,{isPrimary:!0,onClick:Q,disabled:!f||!D||m,children:m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Spinner,{}),(0,s.__)("Uploading...","bcgov-design-system")]}):(0,s.__)("Upload Document","bcgov-design-system")})})})]})};function q(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=J(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function V(){V=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new L(n||[]);return o(i,"_invoke",{value:N(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function y(){}function g(){}function b(){}var x={};l(x,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(D([])));j&&j!==r&&n.call(j,i)&&(x=j);var _=b.prototype=y.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var c=d(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==W(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,r,n){var o=f;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=O(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(W(t)+" is not iterable")}return g.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(_),l(_,c,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function H(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){H(a,n,o,i,s,"next",e)}function s(e){H(a,n,o,i,s,"throw",e)}i(void 0)}))}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return X(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return(t=le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(){re=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new L(n||[]);return o(i,"_invoke",{value:N(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function y(){}function g(){}function b(){}var x={};l(x,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(D([])));j&&j!==r&&n.call(j,i)&&(x=j);var _=b.prototype=y.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var c=d(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Q(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,r,n){var o=f;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=O(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Q(t)+" is not iterable")}return g.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(_),l(_,c,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function ne(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ne(a,n,o,i,s,"next",e)}function s(e){ne(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return se(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,le(n.key),n)}}function le(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}var pe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=de(t),function(e,t){if(t&&("object"==Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ue()?Reflect.construct(t,r||[],de(e).constructor):t.apply(e,r))}(this,t,[e])).state={hasError:!1,error:null,errorInfo:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(t,e),r=t,a=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.error("App error:",e,t),this.setState({errorInfo:t})}},{key:"render",value:function(){return this.state.hasError?(0,l.jsx)("div",{className:"document-repository-error",children:(0,l.jsxs)(o.Notice,{status:"error",isDismissible:!1,children:[(0,l.jsx)("h2",{children:(0,s.__)("Something went wrong in the Document Repository","bcgov-design-system")}),(0,l.jsx)("p",{children:this.state.error&&this.state.error.toString()}),(0,l.jsx)("details",{style:{whiteSpace:"pre-wrap"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})}):this.props.children}}])&&ce(r.prototype,n),a&&ce(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(c.Component);const he=function(){var e=ae((0,n.useState)(!0),2),t=e[0],r=e[1],a=ae((0,n.useState)(null),2),c=a[0],u=a[1],d=ae((0,n.useState)([]),2),f=d[0],p=d[1],h=ae((0,n.useState)(!1),2),m=h[0],v=h[1],y=ae((0,n.useState)(null),2),g=y[0],b=y[1],x=function(){var e,t=K((0,n.useState)([]),2),r=t[0],o=t[1],a=K((0,n.useState)(0),2),s=a[0],c=a[1],l=K((0,n.useState)(1),2),u=l[0],d=l[1],f=K((0,n.useState)(1),2),p=f[0],h=f[1],m=K((0,n.useState)(!0),2),v=m[0],y=m[1],g=K((0,n.useState)(!1),2),b=g[0],x=g[1],w=K((0,n.useState)(null),2),j=w[0],_=w[1],S=K((0,n.useState)({search:"",page:1,per_page:(null===(e=window.documentRepositorySettings)||void 0===e?void 0:e.perPage)||20,orderby:"date",order:"DESC"}),2),E=S[0],N=S[1],O=(0,n.useCallback)(Y(V().mark((function e(){var t,r,n,a;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),_(null),e.prev=2,t=window.documentRepositorySettings.apiNamespace,r=new URLSearchParams,Object.entries(E).forEach((function(e){var t=K(e,2),n=t[0],o=t[1];o&&r.append(n,o)})),e.next=8,i()({path:"/".concat(t,"/documents?").concat(r.toString())});case 8:if((n=e.sent)&&"object"===W(n)){e.next=11;break}throw new Error("Invalid response from server");case 11:a=Array.isArray(n.documents)?n.documents.filter((function(e){return e&&"object"===W(e)&&e.id})):[],o(a),c(n.total||0),d(n.current_page||1),h(n.total_pages||1),y(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),_(e.t0.message||"Error loading documents"),y(!1);case 23:case"end":return e.stop()}}),e,null,[[2,19]])}))),[E]);(0,n.useEffect)((function(){O()}),[O]);var k=function(){var e=Y(V().mark((function e(t){var r;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,r=window.documentRepositorySettings.apiNamespace,e.next=5,i()({path:"/".concat(r,"/documents/").concat(t),method:"DELETE"});case 5:return e.next=7,O();case 7:return x(!1),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(1),_(e.t0.message||"Error deleting document"),x(!1),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Y(V().mark((function e(t,r){var n,o;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.documentRepositorySettings.apiNamespace,e.next=4,i()({path:"/".concat(n,"/documents/").concat(t),method:"PUT",data:r});case 4:return o=e.sent,e.next=7,O();case 7:return e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(0),_(e.t0.message||"Error updating document"),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),L=function(){var e=Y(V().mark((function e(t,r){var n,o,a;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=q(t),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=10;break}return a=o.value,e.next=8,P(a,r);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.next=20,O();case 20:return e.abrupt("return",!0);case 23:return e.prev=23,e.t1=e.catch(0),_(e.t1.message||"Error performing bulk update"),e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,null,[[0,23],[2,12,15,18]])})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){var e=Y(V().mark((function e(t){var r,n,o;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=q(t),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=10;break}return o=n.value,e.next=8,k(o);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 21:return e.prev=21,e.t1=e.catch(0),_(e.t1.message||"Error performing bulk delete"),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[0,21],[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return{documents:r,totalDocuments:s,currentPage:u,totalPages:p,isLoading:v,isDeleting:b,error:j,searchParams:E,setSearchParams:N,fetchDocuments:O,deleteDocument:k,updateDocument:P,bulkUpdateDocuments:L,bulkDeleteDocuments:D}}(),w=x.documents,j=x.totalDocuments,_=x.currentPage,S=x.totalPages,E=x.fetchDocuments,N=x.deleteDocument,O=x.isDeleting,k=(x.searchParams,x.setSearchParams);(0,n.useEffect)((function(){console.log("Documents received:",w),w&&w.length>0&&console.log("First document structure:",JSON.stringify(w[0],null,2))}),[w]);var P=ae((0,n.useState)([]),2),L=P[0],D=P[1];(0,n.useEffect)((function(){var e=function(){var e=oe(re().mark((function e(){var t,n;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.documentRepositorySettings.apiNamespace,e.next=4,i()({path:"/".concat(t,"/metadata-fields")});case 4:n=e.sent,p(n),r(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(e.t0.message||"Error loading metadata fields"),r(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var T=ae((0,n.useState)([]),2),F=T[0],R=T[1],A=ae((0,n.useState)(0),2),I=A[0],M=A[1],U=function(e){if(console.log("Upload success:",e),E(),I<F.length-1){var t=I+1;M(t),b(F[t])}else R([]),M(0),b(null),v(!1)},B=function(){var e=oe(re().mark((function e(t){var r,n;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new FormData).append("file",t),r.append("title",t.name.split(".")[0]),e.next=6,i()({path:"/bcgov-document-repository/v1/documents",method:"POST",body:r});case 6:n=e.sent,console.log("File uploaded successfully:",n),U(n),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.error("Error uploading file:",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return t?(0,l.jsxs)("div",{className:"document-repository-loading",children:[(0,l.jsx)(o.Spinner,{}),(0,l.jsx)("p",{children:(0,s.__)("Loading document repository...","bcgov-design-system")})]}):c?(0,l.jsx)(o.Notice,{status:"error",isDismissible:!1,children:(0,l.jsx)("p",{children:c})}):(0,l.jsx)(pe,{children:(0,l.jsxs)("div",{className:"document-repository",children:[(0,l.jsx)(C,{documents:w||[],isLoading:t,totalItems:j,currentPage:_||1,totalPages:S||1,onPageChange:function(e){k((function(t){return ee(ee({},t),{},{page:e})}))},onDelete:N,isDeleting:O,selectedDocuments:L||[],onSelectDocument:function(e){D((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(function(e){if(Array.isArray(e))return se(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||ie(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]);var r}))},onSelectAll:function(e){D(e?w.map((function(e){return e.id})):[])},metadataFields:f||[],onUploadSuccess:U,onFileDrop:B}),m&&g&&(0,l.jsxs)(o.Modal,{title:F.length>1?(0,s.__)("Upload Documents","bcgov-design-system"):(0,s.__)("Upload Document","bcgov-design-system"),onRequestClose:function(){confirm((0,s.__)("Are you sure you want to cancel the remaining uploads?","bcgov-design-system"))&&(v(!1),b(null),R([]),M(0))},className:"document-upload-modal",children:[(0,l.jsx)("div",{className:"upload-progress-info",children:F.length>1&&(0,l.jsxs)("p",{className:"upload-queue-status",children:[(0,s.__)("Uploading file","bcgov-design-system")," ",I+1," ",(0,s.__)("of","bcgov-design-system")," ",F.length]})}),(0,l.jsx)(z,{metadataFields:f,onUploadSuccess:U,selectedFile:g,modalMode:!0})]})]})})};document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("document-repository-app");if(e){console.log("Document Repository mounting app");var t=document.getElementById("document-repository-modals");t||((t=document.createElement("div")).id="document-repository-modals",document.body.appendChild(t)),(0,n.render)((0,l.jsx)(he,{}),e)}else console.warn("Document Repository app container not found")}))})();
//# sourceMappingURL=document-repository.js.map