/*! For license information please see metadata-settings.js.LICENSE.txt */
(()=>{"use strict";var e={20:(e,t,r)=>{var n=r(540),o=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,c={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!s.hasOwnProperty(n)&&(c[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===c[n]&&(c[n]=t[n]);return{$$typeof:o,type:e,key:l,ref:u,props:c,_owner:a.current}}t.jsx=c,t.jsxs=c},287:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator,y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,m={};function v(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||y}function g(){}function b(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||y}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var _=b.prototype=new g;_.constructor=b,h(_,v.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,j={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,o)&&!O.hasOwnProperty(o)&&(i[o]=t[o]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===i[o]&&(i[o]=c[o]);return{$$typeof:r,type:e,key:a,ref:s,props:i,_owner:j.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var k=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return a=a(c=e),e=""===i?"."+C(c,0):i,x(a)?(o="",null!=e&&(o=e.replace(k,"$&/")+"/"),L(a,t,o,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",x(e))for(var l=0;l<e.length;l++){var u=i+C(s=e[l],l);c+=L(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=L(s=s.value,t,o,u=i+C(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function P(e,t,r){if(null==e)return e;var n=[],o=0;return L(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},T={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:j};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,r){P(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.act=A,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=h({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!O.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:r,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},540:(e,t,r)=>{e.exports=r(287)},848:(e,t,r)=>{e.exports=r(20)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const n=wp.element,o=wp.components,i=wp.i18n,a=wp.apiFetch;var s=r.n(a),c=r(848);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:C(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",h="executing",m="completed",g={};function b(){}function _(){}function x(){}var w={};u(w,a,(function(){return this}));var j=Object.getPrototypeOf,O=j&&j(j(R([])));O&&O!==r&&n.call(O,a)&&(w=O);var S=x.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==l(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?m:y,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(l(t)+" is not iterable")}return _.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:_,configurable:!0}),_.displayName=u(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),u(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(d(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),u(S,c,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function g(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){g(i,n,o,a,s,"next",e)}function s(e){g(i,n,o,a,s,"throw",e)}a(void 0)}))}}var _=void 0!==o.DragDropContext?o.DragDropContext:function(e){return e.children},x=void 0!==o.Droppable?o.Droppable:function(e){return(0,e.children)({droppableProps:{},innerRef:function(){}},{})},w=void 0!==o.Draggable?o.Draggable:function(e){return(0,e.children)({draggableProps:{},dragHandleProps:{},innerRef:function(){}},{})},j={text:(0,i.__)("Text","bcgov-design-system"),select:(0,i.__)("Select","bcgov-design-system"),date:(0,i.__)("Date","bcgov-design-system")},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={};return e.id||(n.id=(0,i.__)("Field ID is required","bcgov-design-system")),e.label||(n.label=(0,i.__)("Field label is required","bcgov-design-system")),t.some((function(t,n){return t.id===e.id&&n!==r}))&&(n.id=(0,i.__)("A field with this ID already exists","bcgov-design-system")),"select"!==e.type||e.options&&0!==e.options.length||(n.options=(0,i.__)("Select fields require at least one option","bcgov-design-system")),n},S=function(e,t,r){return h(h({},e),{},{modals:h(h({},e.modals),{},m({},t,h(h({},e.modals[t]),{},{field:h(h({},e.modals[t].field),r)})))})};const E=function(){var e=d((0,n.useState)({fields:[],isLoading:!0,error:null,isSaving:!1,modals:{add:{isOpen:!1,field:{id:"",label:"",type:"text",options:[],_rawOptionsText:""}},edit:{isOpen:!1,field:null,index:null}}}),2),t=e[0],r=e[1],a=function(){var e=window.documentRepositorySettings.apiNamespace,t=(0,n.useCallback)(b(v().mark((function t(){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s()({path:"/".concat(e,"/metadata-fields")});case 3:return r=t.sent,t.abrupt("return",{success:!0,data:r});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{success:!1,error:t.t0.message||(0,i.__)("Error loading metadata fields","bcgov-design-system")});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e]),r=(0,n.useCallback)(function(){var t=b(v().mark((function t(r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s()({path:"/".concat(e,"/metadata-fields"),method:"PUT",data:{fields:r}});case 3:return t.abrupt("return",{success:!0});case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{success:!1,error:t.t0.message||(0,i.__)("Error saving metadata fields","bcgov-design-system")});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return{fetchFields:t,saveFields:r}}(),l=a.fetchFields,f=a.saveFields,p=(0,n.useMemo)((function(){return u(t.fields).sort((function(e,t){return e.order-t.order}))}),[t.fields]);(0,n.useEffect)((function(){var e=function(){var e=b(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:t=e.sent,r((function(e){return h(h({},e),{},{fields:t.success?t.data:[],error:t.success?null:t.error,isLoading:!1})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[l]);var y=(0,n.useCallback)((function(e,t){var n=e.target.value,o=n.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));r((function(e){return h(h({},e),{},{modals:h(h({},e.modals),{},m({},t,h(h({},e.modals[t]),{},{field:h(h({},e.modals[t].field),{},{_rawOptionsText:n,options:o})})))})}))}),[]),g=(0,n.useCallback)(b(v().mark((function e(){var n,o,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.modals.add.field,o=O(n,t.fields),!(Object.keys(o).length>0)){e.next=5;break}return r((function(e){return h(h({},e),{},{error:o})})),e.abrupt("return");case 5:return r((function(e){return h(h({},e),{},{isSaving:!0})})),e.next=8,f([].concat(u(t.fields),[h(h({},n),{},{order:t.fields.length})]));case 8:(i=e.sent).success?r((function(e){return h(h({},e),{},{fields:[].concat(u(e.fields),[h(h({},n),{},{order:e.fields.length})]),error:null,isSaving:!1,modals:h(h({},e.modals),{},{add:{isOpen:!1,field:{id:"",label:"",type:"text",options:[],_rawOptionsText:""}}})})})):r((function(e){return h(h({},e),{},{error:i.error,isSaving:!1})}));case 10:case"end":return e.stop()}}),e)}))),[t.modals.add.field,t.fields,f]),E=function(){var e=b(v().mark((function e(){var n,o,i,a,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.modals.edit,o=n.field,i=n.index,a=O(o,t.fields,i),!(Object.keys(a).length>0)){e.next=5;break}return r((function(e){return h(h({},e),{},{error:a})})),e.abrupt("return");case 5:return r((function(e){return h(h({},e),{},{isSaving:!0})})),e.next=8,f([].concat(u(t.fields.slice(0,i)),[o],u(t.fields.slice(i+1))));case 8:(s=e.sent).success?r((function(e){return h(h({},e),{},{fields:[].concat(u(t.fields.slice(0,i)),[o],u(t.fields.slice(i+1))),error:null,isSaving:!1,modals:h(h({},e.modals),{},{edit:{isOpen:!1,field:null,index:null}})})})):r((function(e){return h(h({},e),{},{error:s.error,isSaving:!1})}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=b(v().mark((function e(n){var o,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm((0,i.__)("Are you sure you want to delete this field? This will remove this metadata from ALL documents and cannot be undone.","bcgov-design-system"))){e.next=2;break}return e.abrupt("return");case 2:return r((function(e){return h(h({},e),{},{isSaving:!0})})),e.prev=3,e.next=6,s()({path:"/".concat(window.documentRepositorySettings.apiNamespace,"/metadata-fields/").concat(n,"/cleanup"),method:"DELETE"});case 6:return o=t.fields.filter((function(e){return e.id!==n})),e.next=9,f(o);case 9:(a=e.sent).success?r((function(e){return h(h({},e),{},{fields:o,isSaving:!1,error:null})})):r((function(e){return h(h({},e),{},{error:a.error,isSaving:!1})})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r((function(t){return h(h({},t),{},{error:e.t0.message||(0,i.__)("Error deleting metadata field","bcgov-design-system"),isSaving:!1})}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return void 0!==e._rawOptionsText?e._rawOptionsText:Array.isArray(e.options)?e.options.join("\n"):""},L=(0,n.useCallback)((function(e,t,n){r((function(r){if("label"===t){var o=n.toLowerCase().replace(/[^a-z0-9]+/g,"_"),i=r.modals[e].field.type.toLowerCase(),a="".concat(o,"_").concat(i);return S(r,e,m(m({},t,n),"id",a))}if("type"===t){var s=(r.modals[e].field.label||"").toLowerCase().replace(/[^a-z0-9]+/g,"_"),c="".concat(s,"_").concat(n.toLowerCase());return S(r,e,m(m({},t,n),"id",c))}return S(r,e,m({},t,n))}))}),[]),P=((0,n.useCallback)((function(e,t){r((function(r){return S(r,e,{id:t.toLowerCase().replace(/[^a-z0-9]+/g,"_")})}))}),[]),(0,n.useCallback)((function(e){r((function(t){return function(e,t){return h(h({},e),{},{modals:h(h({},e.modals),{},m({},t,h(h({},e.modals[t]),{},{isOpen:!1})))})}(t,e)}))}),[]));return t.isLoading?(0,c.jsxs)("div",{className:"metadata-settings-loading",children:[(0,c.jsx)(o.Spinner,{}),(0,c.jsx)("p",{children:(0,i.__)("Loading metadata fields...","bcgov-design-system")})]}):(0,c.jsxs)("div",{className:"metadata-settings",children:[t.error&&(0,c.jsx)(o.Notice,{status:"error",isDismissible:!1,children:(0,c.jsx)("p",{children:t.error})}),(0,c.jsxs)(o.Card,{children:[(0,c.jsxs)(o.CardHeader,{children:[(0,c.jsx)("h2",{children:(0,i.__)("Document Metadata Fields","bcgov-design-system")}),(0,c.jsx)(o.Button,{variant:"primary",onClick:function(){return r((function(e){return h(h({},e),{},{modals:h(h({},e.modals),{},{add:{isOpen:!0,field:{id:"",label:"",type:"text",options:[],_rawOptionsText:""}}})})}))},disabled:t.isSaving,children:(0,i.__)("Add New Field","bcgov-design-system")})]}),(0,c.jsxs)(o.CardBody,{children:[(0,c.jsx)("div",{className:"metadata-fields-info",children:(0,c.jsx)("p",{children:(0,i.__)("Customize the metadata fields that will be available for documents. Drag and drop to reorder fields.","bcgov-design-system")})}),0===t.fields.length?(0,c.jsx)("div",{className:"no-fields-message",children:(0,c.jsx)("p",{children:(0,i.__)('No custom metadata fields defined yet. Click "Add New Field" to create one.',"bcgov-design-system")})}):(0,c.jsx)(_,{onDragEnd:function(e){if(e.destination){var n=u(t.fields),o=d(n.splice(e.source.index,1),1)[0];n.splice(e.destination.index,0,o);var i=n.map((function(e,t){return h(h({},e),{},{order:t})}));r((function(e){return h(h({},e),{},{fields:i})}))}},children:(0,c.jsx)(x,{droppableId:"metadata-fields",children:function(e){return(0,c.jsxs)("div",h(h({className:"metadata-fields-list"},e.droppableProps),{},{ref:e.innerRef,children:[p.map((function(e,n){return(0,c.jsx)(w,{draggableId:e.id,index:n,children:function(a){return(0,c.jsxs)("div",h(h(h({className:"metadata-field-item",ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{children:[(0,c.jsxs)("div",{className:"metadata-field-info",children:[(0,c.jsx)("h3",{children:e.label}),(0,c.jsx)("div",{className:"metadata-field-details",children:(0,c.jsxs)("span",{className:"metadata-field-id",children:["ID: ",e.id.replace(/_[^_]+$/,"")]})})]}),(0,c.jsxs)("div",{className:"metadata-field-actions",children:[(0,c.jsx)(o.Button,{variant:"secondary",onClick:function(){return function(e,t){r((function(r){return h(h({},r),{},{modals:h(h({},r.modals),{},{edit:{isOpen:!0,field:h({},e),index:t}})})}))}(e,n)},children:(0,i.__)("Edit","bcgov-design-system")}),(0,c.jsx)(o.Button,{variant:"secondary",isDestructive:!0,onClick:function(){return k(e.id)},disabled:t.isSaving,children:(0,i.__)("Delete","bcgov-design-system")})]})]}))}},e.id)})),e.placeholder]}))}})})]})]}),t.modals.add.isOpen&&(0,c.jsx)(o.Modal,{title:(0,i.__)("Add New Metadata Field","bcgov-design-system"),onRequestClose:function(){return P("add")},className:"metadata-field-modal",isDismissible:!0,shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0,children:(0,c.jsxs)("div",{className:"metadata-field-form",children:[(0,c.jsx)(o.TextControl,{label:(0,i.__)("Field Label","bcgov-design-system"),help:(0,i.__)("Display name for the field","bcgov-design-system"),value:t.modals.add.field.label,onChange:function(e){return L("add","label",e)},required:!0}),(0,c.jsx)(o.SelectControl,{label:(0,i.__)("Field Type","bcgov-design-system"),value:t.modals.add.field.type,options:Object.entries(j).map((function(e){var t=d(e,2);return{value:t[0],label:t[1]}})),onChange:function(e){return L("add","type",e)}}),"select"===t.modals.add.field.type&&(0,c.jsxs)("div",{className:"field-options",children:[(0,c.jsx)("label",{htmlFor:"field-options",children:(0,i.__)("Options","bcgov-design-system")}),(0,c.jsx)("p",{className:"field-options-help",children:(0,i.__)("Enter each option on a new line:","bcgov-design-system")}),(0,c.jsxs)("div",{className:"field-options-example",children:[(0,i.__)("Example:","bcgov-design-system")," ",(0,c.jsx)("br",{}),"Draft",(0,c.jsx)("br",{}),"In Review",(0,c.jsx)("br",{}),"Approved",(0,c.jsx)("br",{}),"Archived"]}),(0,c.jsx)("textarea",{id:"field-options",value:C(t.modals.add.field),onChange:function(e){return y(e,"add")},onKeyDown:function(e){"Enter"===e.key&&e.stopPropagation(),"Tab"===e.key&&e.preventDefault()},rows:5,placeholder:(0,i.__)("Enter your options here...","bcgov-design-system")})]}),(0,c.jsxs)("div",{className:"metadata-field-actions",children:[(0,c.jsx)(o.Button,{variant:"secondary",onClick:function(){return P("add")},children:(0,i.__)("Cancel","bcgov-design-system")}),(0,c.jsx)(o.Button,{variant:"primary",onClick:g,children:(0,i.__)("Add Field","bcgov-design-system")})]})]})}),t.modals.edit.isOpen&&t.modals.edit.field&&(0,c.jsx)(o.Modal,{title:(0,i.__)("Edit Metadata Field","bcgov-design-system"),onRequestClose:function(){return P("edit")},className:"metadata-field-modal",isDismissible:!0,shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0,children:(0,c.jsxs)("div",{className:"metadata-field-form",children:[(0,c.jsx)(o.TextControl,{label:(0,i.__)("Field Label","bcgov-design-system"),help:(0,i.__)("Display name for the field","bcgov-design-system"),value:t.modals.edit.field.label,onChange:function(e){return L("edit","label",e)},required:!0}),(0,c.jsxs)("div",{className:"field-type-display",children:[(0,c.jsx)("label",{children:(0,i.__)("Field Type","bcgov-design-system")}),(0,c.jsx)("div",{className:"field-type-value",children:j[t.modals.edit.field.type]})]}),"select"===t.modals.edit.field.type&&(0,c.jsxs)("div",{className:"field-options",children:[(0,c.jsx)("label",{htmlFor:"field-options-edit",children:(0,i.__)("Options","bcgov-design-system")}),(0,c.jsx)("p",{className:"field-options-help",children:(0,i.__)("Enter each option on a new line:","bcgov-design-system")}),(0,c.jsxs)("div",{className:"field-options-example",children:[(0,i.__)("Example:","bcgov-design-system")," ",(0,c.jsx)("br",{}),"Draft",(0,c.jsx)("br",{}),"In Review",(0,c.jsx)("br",{}),"Approved",(0,c.jsx)("br",{}),"Archived"]}),(0,c.jsx)("textarea",{id:"field-options-edit",value:C(t.modals.edit.field),onChange:function(e){return y(e,"edit")},onKeyDown:function(e){"Enter"===e.key&&e.stopPropagation(),"Tab"===e.key&&e.preventDefault()},rows:5,placeholder:(0,i.__)("Enter your options here...","bcgov-design-system")})]}),(0,c.jsxs)("div",{className:"metadata-field-actions",children:[(0,c.jsx)(o.Button,{variant:"secondary",onClick:function(){return P("edit")},children:(0,i.__)("Cancel","bcgov-design-system")}),(0,c.jsx)(o.Button,{variant:"primary",onClick:E,children:(0,i.__)("Save Field","bcgov-design-system")})]})]})})]})};document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("document-repository-metadata-app");e&&(0,n.render)((0,c.jsx)(E,{}),e)}))})();
//# sourceMappingURL=metadata-settings.js.map