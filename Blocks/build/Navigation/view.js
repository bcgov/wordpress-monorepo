document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".dswp-block-navigation-is-mobile-overlay, .dswp-block-navigation-is-always-overlay, .dswp-block-navigation-is-never-overlay").forEach((e=>{const n={mobileNavIcon:e.querySelector(".dswp-nav-mobile-toggle-icon"),menuContainer:e.querySelector(".dswp-block-navigation__container"),iconText:e.querySelector(".dswp-nav-mobile-menu-icon-text"),topBar:e.querySelector(".dswp-nav-mobile-menu-top-bar"),middleBar:e.querySelector(".dswp-nav-mobile-menu-middle-bar"),bottomBar:e.querySelector(".dswp-nav-mobile-menu-bottom-bar")},t=e.classList.contains("dswp-block-navigation-is-mobile-overlay"),o=e.classList.contains("dswp-block-navigation-is-always-overlay"),s="true"===e.dataset.showInDesktop,i="true"===e.dataset.showInMobile;function a(){e.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{e.classList.remove("is-open");const n=e.querySelector(".wp-block-navigation__submenu-container"),t=e.querySelector(".dswp-submenu-toggle");n&&n.classList.remove("is-open"),t&&t.setAttribute("aria-expanded","false")}))}function l(){n.iconText&&(n.iconText.innerText="Menu"),n.topBar&&n.topBar.classList.remove("dswp-nav-mobile-menu-top-bar-open"),n.middleBar&&n.middleBar.classList.remove("dswp-nav-mobile-menu-middle-bar-open"),n.bottomBar&&n.bottomBar.classList.remove("dswp-nav-mobile-menu-bottom-bar-open"),n.mobileNavIcon.setAttribute("aria-expanded","false")}function c(){e.querySelectorAll(".dswp-submenu-toggle").forEach((e=>{e.setAttribute("aria-expanded","false")}))}function r(){const t=parseInt(e.dataset.dswpMobileBreakpoint)||768;window.innerWidth<=t?(n.mobileNavIcon.style.display="flex",n.menuContainer.style.display="none",n.menuContainer.classList.add("dswp-is-mobile"),e.classList.add("dswp-block-navigation-is-mobile-overlay")):(n.mobileNavIcon.style.display="none",n.menuContainer.style.display="flex",n.menuContainer.classList.remove("dswp-is-mobile","is-menu-open"),e.classList.remove("dswp-block-navigation-is-mobile-overlay"),l(),a())}function d(e){const n=e.querySelector(".wp-block-navigation__submenu-container");if(!n)return;const t=u(e);1===t?(n.style.left="0%",n.style.right="auto"):t>=2&&(n.style.left="100%",n.style.right="auto");const o=n.getBoundingClientRect(),s=window.innerWidth;1===t&&o.right>s?(n.style.left="auto",n.style.right="0%"):t>=2&&o.right>s&&(n.style.left="auto",n.style.right="100%")}function u(e){let n=1,t=e.parentElement;for(;t;)t.classList.contains("wp-block-navigation-submenu")&&n++,t=t.parentElement;return n}s&&parseInt(e.dataset.dswpMobileBreakpoint),i&&parseInt(e.dataset.dswpMobileBreakpoint),o||e.classList.contains("dswp-block-navigation-is-mobile-only")?(n.mobileNavIcon.style.display="flex",n.menuContainer.style.display="none",n.menuContainer.classList.add("dswp-is-mobile")):t&&r(),t&&window.addEventListener("resize",r),n.mobileNavIcon&&n.mobileNavIcon.addEventListener("click",(function(){console.log("Toggle button clicked"),n.menuContainer.classList.toggle("is-menu-open");const e=n.menuContainer.classList.contains("is-menu-open");n.mobileNavIcon.setAttribute("aria-expanded",e.toString()),n.topBar.classList.toggle("dswp-nav-mobile-menu-top-bar-open"),n.middleBar.classList.toggle("dswp-nav-mobile-menu-middle-bar-open"),n.bottomBar&&n.bottomBar.classList.toggle("dswp-nav-mobile-menu-bottom-bar-open"),n.iconText.innerText=e?"Close menu":"Menu",n.menuContainer.style.display=e?"grid":"none",e||a()})),document.addEventListener("click",(function(t){const o=e.contains(t.target),s=window.innerWidth<=(parseInt(e.dataset.dswpMobileBreakpoint)||768);o||(s&&n.menuContainer.classList.contains("is-menu-open")?(n.menuContainer.classList.remove("is-menu-open"),n.menuContainer.style.display="none",l(),a()):s||(a(),c()))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(n.menuContainer.classList.contains("is-menu-open")&&(n.menuContainer.classList.remove("is-menu-open"),n.menuContainer.style.display="none",l()),a(),c())})),e.querySelectorAll(".wp-block-navigation-submenu > .wp-block-navigation-item__content").forEach((t=>{const o=t.closest(".wp-block-navigation-submenu"),s=o?.querySelector(".wp-block-navigation__submenu-container");if(s){!function(e){let n=e.parentElement;for(;n;)n.classList.contains("wp-block-navigation-submenu"),n=n.parentElement}(o);const s=document.createElement("button");s.className="dswp-submenu-toggle",s.setAttribute("aria-expanded","false"),s.setAttribute("aria-label","Toggle submenu"),t.parentNode.insertBefore(s,t.nextSibling),s.addEventListener("keydown",(e=>{if("Enter"===e.key||" "===e.key)if(e.preventDefault(),n.menuContainer.classList.contains("dswp-is-mobile"))s.click();else{o.classList.toggle("is-open");const e=o.querySelector(".wp-block-navigation__submenu-container");e&&(e.classList.toggle("is-open"),o.classList.contains("is-open"))&&u(o)>=2&&d(o),s.setAttribute("aria-expanded",o.classList.contains("is-open"))}})),s.addEventListener("click",(()=>{if(n.menuContainer.classList.contains("dswp-is-mobile")){const n=[];let t=o;for(;t;)t.classList.contains("wp-block-navigation-submenu")&&n.push(t),t=t.parentElement.closest(".wp-block-navigation-submenu");e.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{if(!n.includes(e)){e.classList.remove("is-open");const n=e.querySelector(".wp-block-navigation__submenu-container"),t=e.querySelector(".dswp-submenu-toggle");n&&n.classList.remove("is-open"),t&&t.setAttribute("aria-expanded","false")}})),o.classList.toggle("is-open"),o.classList.contains("is-open")?s.setAttribute("aria-expanded","true"):s.setAttribute("aria-expanded","false")}})),n.menuContainer.classList.contains("dswp-is-mobile")||(o.addEventListener("mouseenter",(()=>{if(!n.menuContainer.classList.contains("dswp-is-mobile")){o.classList.add("is-open");const e=o.querySelector(".wp-block-navigation__submenu-container");e&&(e.classList.add("is-open"),u(o)>=2&&d(o))}})),o.addEventListener("mouseleave",(()=>{if(!n.menuContainer.classList.contains("dswp-is-mobile")){o.classList.remove("is-open");const e=o.querySelector(".wp-block-navigation__submenu-container");e&&e.classList.remove("is-open")}})))}}));const m=window.location.pathname;function p(){const n=parseInt(e.dataset.dswpMobileBreakpoint)||768,t=window.innerWidth<=n;console.log("Updating display for nav:",e),console.log("Mobile breakpoint:",n),console.log("Is mobile view:",t),console.log("Show in desktop:",s),console.log("Show in mobile:",i),s&&!t?(console.log("Displaying for desktop"),e.style.display="flex"):i&&t?(console.log("Displaying for mobile"),e.style.display="flex"):(console.log("Hiding navigation"),e.style.display="none")}e.querySelectorAll(".wp-block-navigation-item__content").forEach((e=>{if(new URL(e.href).pathname===m){e.classList.add("active");const n=e.closest(".wp-block-navigation-item");n&&n.classList.add("active")}})),p(),window.addEventListener("resize",p)}))}));